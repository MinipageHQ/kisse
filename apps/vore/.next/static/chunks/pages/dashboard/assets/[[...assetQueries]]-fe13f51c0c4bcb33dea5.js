(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{935:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return le}});var s=t(9527),n=t(6121),i=t(7672),a=t(2540),o=t(1664),l=t(2322),c=function(e){e.subHeader;var r=e.title,t=e.children;e.container;return(0,l.jsxs)(i.Z,{title:r,children:[(0,l.jsx)(n.b,{title:"You need to verify your identity before you can sell items.",variant:"outline",children:"To comply with regulations, we need to verify your identity and bank information via our partner, Stripe, before you can sell items on Saltana."}),(0,l.jsxs)("div",{className:"border-b border-gray-200 px-4 py-4 sm:flex sm:items-center sm:justify-between sm:px-6 lg:px-8",children:[(0,l.jsx)("div",{className:"flex-1 min-w-0",children:(0,l.jsx)("h1",{className:"text-lg font-medium leading-6 text-gray-900 sm:truncate",children:r})}),(0,l.jsxs)("div",{className:"mt-4 flex sm:mt-0 sm:ml-4",children:[(0,l.jsx)("button",{type:"button",className:"order-1 ml-3 inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:order-0 sm:ml-0",children:"Share"}),(0,l.jsx)(o.Link,{href:a.Routes.AssetsPage({linkQueries:["new"]}),passHref:!0,children:(0,l.jsx)("a",{className:"order-0 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:order-1 sm:ml-3",children:"Create"})})]})]}),t]})},d=t(7234),u=t(2784),p=t(7757),m=t.n(p),x=t(4942),f=t(5861),h=t(1428),b=(0,h.buildRpcClient)({resolverName:"createAsset",resolverType:"mutation",routePath:"/api/rpc/createAsset"}),g=t(1739),y=t(3435),j=t(6919),v=t(2345);function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){(0,x.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var N=(0,u.forwardRef)((function(e,r){var t=e.name,s=e.label,n=(e.outerProps,e.fieldProps),i=(e.labelProps,e.helpText),a=((0,y.Z)(e,["name","label","outerProps","fieldProps","labelProps","helpText"]),(0,v.U$)(t,O({parse:function(e){return""===e?null:e}},n))),o=a.input,c=a.meta,d=c.touched,u=c.error,p=c.submitError,m=c.submitting,x=Array.isArray(u)?u.join(", "):u||p;return(0,l.jsx)(j.Y,O(O({label:s,required:!0,error:d&&x,description:i,stepHoldDelay:500,stepHoldInterval:100},o),{},{type:"number",id:t,disabled:m}))})),P=t(5042),k=t(1309);function D(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function T(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?D(Object(t),!0).forEach((function(r){(0,x.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var C=(0,u.forwardRef)((function(e,r){var t=e.name,s=e.label,n=(e.outerProps,e.fieldProps),i=(e.labelProps,e.helpText),a=((0,y.Z)(e,["name","label","outerProps","fieldProps","labelProps","helpText"]),(0,v.U$)(t,T({parse:function(e){return""===e?null:e}},n))),o=a.input,c=a.meta,d=c.touched,u=c.error,p=c.submitError,m=c.submitting,x=Array.isArray(u)?u.join(", "):u||p;return(0,l.jsx)(P.S,{id:t,required:!0,label:s,description:i,error:d&&x,children:(0,l.jsx)(k.g,T(T({},o),{},{id:t,disabled:m,ref:r}))})})),A=t(2041),E=t(9182),R=t(4588),S=t(4686),Z=t(8538),L=(0,h.buildRpcClient)({resolverName:"getAssetTypes",resolverType:"query",routePath:"/api/rpc/getAssetTypes"});function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?I(Object(t),!0).forEach((function(r){(0,x.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var _=(0,u.forwardRef)((function(e,r){var t=e.image,s=e.label,n=e.description,i=(0,y.Z)(e,["image","label","description"]);return(0,l.jsx)("div",z(z({ref:r},i),{},{children:(0,l.jsxs)(E.Z,{noWrap:!0,children:[(0,l.jsx)(R.q,{src:t}),(0,l.jsxs)("div",{children:[(0,l.jsx)(S.x,{children:s}),(0,l.jsx)(S.x,{size:"xs",color:"dimmed",children:n})]})]})}))}));function q(){var e=(0,h.useQuery)(L,{}),r=(0,d.Z)(e,1)[0].assetTypes.map((function(e){return{label:e.name}}));return(0,l.jsx)(Z.Ph,{label:"Choose employee of the month",placeholder:"Pick one",itemComponent:_,data:r,searchable:!0,maxDropdownHeight:400,nothingFound:"Nobody here",filter:function(e,r){var t;return(null===(t=r.label)||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase().trim()))||r.description.toLowerCase().includes(e.toLowerCase().trim())}})}function H(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function Q(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?H(Object(t),!0).forEach((function(r){(0,x.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function M(e){return(0,l.jsxs)(g.l0,Q(Q({},e),{},{children:[(0,l.jsx)(A.I,{name:"name",label:"Name",placeholder:"Name"}),(0,l.jsx)(C,{name:"description",label:"description",placeholder:"description"}),(0,l.jsx)(N,{name:"price",label:"Name",placeholder:"Name"}),(0,l.jsx)(A.I,{name:"name",label:"Name",placeholder:"Name"}),(0,l.jsx)(q,{})]}))}var F=t(9454),U=t(195),V=(U.z.object({organizationId:U.z.string().cuid().optional(),name:U.z.string().max(255),description:U.z.string().max(3e3),status:U.z.enum(["DRAFT","ARCHIVED","LIVE","SUSPENDED"]),categoryId:U.z.string().cuid().optional(),assetTypeId:U.z.string().cuid().optional(),quantity:U.z.number().min(-1).default(-1),price:U.z.number().min(0),currency:U.z.enum(["USD","EUR","TRY"]).default("USD")}),F.xG.pick({organizationId:!0,name:!0,description:!0}).extend({}).partial({})),G=(F.xG.pick({}).extend({}).partial({}),function(){var e=(0,a.useRouter)(),r=(0,h.useMutation)(b),t=(0,d.Z)(r,1)[0];return(0,l.jsx)(M,{submitText:"Create the asset",schema:V,submitProps:{className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sky-500 hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500"},initialValues:{},onSubmit:function(){var r=(0,f.Z)(m().mark((function r(s){var n;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("asset form new values",s),r.next=4,t(s);case 4:null!==(n=r.sent)&&void 0!==n&&n.id&&e.push(a.Routes.AssetsPage({assetQueries:[null===n||void 0===n?void 0:n.id]})),r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),console.error(r.t0),r.abrupt("return",(0,x.Z)({},g.Ck,r.t0.toString()));case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()})}),X=(0,h.buildRpcClient)({resolverName:"deleteAsset",resolverType:"mutation",routePath:"/api/rpc/deleteAsset"}),Y=(0,h.buildRpcClient)({resolverName:"getAsset",resolverType:"query",routePath:"/api/rpc/getAsset"}),B=function(e){var r=e.assetId,t=e.setModalTitle,n=(0,a.useRouter)(),i=(0,h.useMutation)(X),o=(0,d.Z)(i,1)[0],c=(0,h.useQuery)(Y,{id:r},{enabled:!!r,initialData:{id:r,name:""}}),p=(0,d.Z)(c,2),x=p[0],b=p[1];return(0,u.useEffect)((function(){!0===b.isFetched&&t("Edit ".concat(null===x||void 0===x?void 0:x.name))}),[b.isFetched,null===x||void 0===x?void 0:x.name,t]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Head,{children:(0,l.jsxs)("title",{children:["asset ",null===x||void 0===x?void 0:x.id]})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{children:["asset ",null===x||void 0===x?void 0:x.id]}),(0,l.jsx)("pre",{children:JSON.stringify(x,null,2)}),(0,l.jsx)("button",{type:"button",onClick:(0,f.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==x&&void 0!==x&&x.id){e.next=2;break}return e.abrupt("return");case 2:if(!window.confirm("This will be deleted")){e.next=6;break}return e.next=5,o({id:null===x||void 0===x?void 0:x.id});case 5:n.push(a.Routes.AssetsPage({}));case 6:case"end":return e.stop()}}),e)}))),style:{marginLeft:"0.5rem"},children:"Delete"})]})]})},W=function(e){var r=e.assetId,t=e.setModalTitle;return(0,l.jsx)("div",{children:(0,l.jsx)(u.Suspense,{fallback:(0,l.jsx)("div",{children:"Loading..."}),children:(0,l.jsx)(B,{assetId:r,setModalTitle:t})})})},$=t(4047),J=t(1083);function K(){var e=(0,a.useRouter)(),r=e.query,t=e.push,s=r.assetQueries||[],n=(0,d.Z)(s,2),i=n[0],o=void 0===i?null:i,c=(n[1],(0,u.useState)("Create an asset...")),p=c[0],m=c[1];return o?(0,l.jsx)($.u,{opened:"string"===typeof o,onClose:function(){return t("/dashboard/assets")},title:p,children:(0,l.jsx)(u.Suspense,{fallback:(0,l.jsx)(J.O,{visible:!0}),children:"new"===o?(0,l.jsx)(G,{}):(0,l.jsx)(W,{assetId:o,setModalTitle:m})})}):null}var ee=t(4698),re=t(7325),te=(0,h.buildRpcClient)({resolverName:"getAssets",resolverType:"query",routePath:"/api/rpc/getAssets"}),se=t(6762);function ne(){var e=(0,a.useRouter)().push;return(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,l.jsx)("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),(0,l.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No assets"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new asset."}),(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsxs)("button",{onClick:function(){return e(a.Routes.AssetsPage({assetQueries:["new"]}))},type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,l.jsx)(se.pOD,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"New Asset"]})})]})}var ie=function(){var e=(0,a.useRouter)(),r=Number(e.query.page)||0,t=(0,h.usePaginatedQuery)(te,{orderBy:{id:"asc"},skip:100*r,take:100}),s=(0,d.Z)(t,1)[0],n=s.assets,i=s.hasMore;return 0===(null===n||void 0===n?void 0:n.length)?(0,l.jsx)(ne,{}):(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{disabled:0===r,onClick:function(){return e.push({query:{page:r-1}})},children:"Previous"}),(0,l.jsx)("button",{disabled:!i,onClick:function(){return e.push({query:{page:r+1}})},children:"Next"}),(0,l.jsxs)("div",{className:"mt-10 sm:hidden",children:[(0,l.jsx)("div",{className:"px-4 sm:px-6",children:(0,l.jsx)("h2",{className:"text-gray-500 text-xs font-medium uppercase tracking-wide",children:"Links"})}),(0,l.jsx)("ul",{role:"list",className:"mt-3 border-t border-gray-200 divide-y divide-gray-100",children:n.map((function(e){return(0,l.jsx)("li",{children:(0,l.jsx)(o.Link,{href:a.Routes.AssetsPage({assetQueries:[e.id]}),passHref:!0,children:(0,l.jsxs)("a",{className:"group flex items-center justify-between px-4 py-4 hover:bg-gray-50 sm:px-6",children:[(0,l.jsxs)("span",{className:"flex items-center truncate space-x-3",children:[(0,l.jsx)("span",{className:(0,ee.Z)("w-2.5 h-2.5 flex-shrink-0 rounded-full"),"aria-hidden":"true"}),(0,l.jsxs)("span",{className:"font-medium truncate text-sm leading-6",children:[e.name," ",(0,l.jsx)("span",{className:"truncate font-normal text-gray-500",children:e.assetTypeId})]})]}),(0,l.jsx)(re.XCv,{className:"ml-4 h-5 w-5 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"})]})})},e.id)}))})]}),(0,l.jsx)("div",{className:"hidden mt-8 sm:block",children:(0,l.jsx)("div",{className:"align-middle inline-block min-w-full border-b border-gray-200",children:(0,l.jsxs)("table",{className:"min-w-full",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,l.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,l.jsx)("span",{className:"lg:pl-2",children:"Link"})}),(0,l.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Members"}),(0,l.jsx)("th",{className:"hidden md:table-cell px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last updated"}),(0,l.jsx)("th",{className:"pr-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:n.map((function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-3 max-w-0 w-full whitespace-nowrap text-sm font-medium text-gray-900",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3 lg:pl-2",children:[(0,l.jsx)("div",{className:(0,ee.Z)("flex-shrink-0 w-2.5 h-2.5 rounded-full"),"aria-hidden":"true"}),(0,l.jsx)("a",{href:"#",className:"truncate hover:text-gray-600",children:(0,l.jsxs)("span",{children:[e.name,e.description," ",(0,l.jsxs)("span",{className:"text-gray-500 font-normal",children:["in ",e.assetTypeId]})]})})]})}),(0,l.jsx)("td",{className:"px-6 py-3 text-sm text-gray-500 font-medium",children:(0,l.jsx)("div",{className:"flex items-center space-x-2",children:(0,l.jsx)("div",{className:"flex flex-shrink-0 -space-x-1"})})}),(0,l.jsx)("td",{className:"hidden md:table-cell px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-right"}),(0,l.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,l.jsx)(o.Link,{href:a.Routes.AssetsPage({assetQueries:[e.id]}),passHref:!0,children:(0,l.jsx)("a",{href:"#",className:"text-indigo-600 hover:text-indigo-900",children:"Edit"})})})]},e.id)}))})]})})})]})},ae=function(){return(0,l.jsx)(u.Suspense,{fallback:(0,l.jsx)("div",{children:"Loading..."}),children:(0,l.jsx)(ie,{})})},oe=function(e){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Head,{children:(0,l.jsx)("title",{children:"Assets"})}),(0,l.jsx)(ae,{}),(0,l.jsx)(K,{})]})};oe.authenticate=!0,oe.getLayout=function(e){return(0,l.jsx)(c,{children:e})};var le=oe},3772:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/assets/[[...assetQueries]]",function(){return t(935)}])}},function(e){e.O(0,[247,92,290,632,361,672,454,774,888,179],(function(){return r=3772,e(e.s=r);var r}));var r=e.O();_N_E=r}]);