(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{6281:function(e,r,t){"use strict";var n=t(4468),s=t(2540),a=t(2784),o=t(7672),i=t(3491),c=t(2322),l=[{name:"Profile",href:"/dashboard/customize",current:!0},{name:"Notifications",href:"/dashboard/notifications",current:!1},{name:"Custom Domains",href:"/dashboard/domains",current:!1},{name:"Plans & Billing",href:"/dashboard/billing",current:!1}];r.Z=function(e){e.title;var r=e.children,t=(0,s.useRouter)(),d=l.findIndex((function(e){return e.href===t.asPath}));return(0,c.jsx)(o.Z,{children:(0,c.jsx)(i.m,{active:d,onTabChange:function(e,r){t.push(r)},children:l.map((function(e){var t=e.name,s=e.href;e.current;return(0,c.jsx)(i.m.Tab,{label:t,tabKey:s,children:(0,c.jsx)(a.Suspense,{fallback:"Loading Settings LAyout",children:(0,c.jsx)(n.W,{padding:10,children:r})})},s)}))})})}},5300:function(e,r,t){"use strict";t.d(r,{Ck:function(){return a.Ck},Yl:function(){return m}});var n=t(4942),s=t(3435),a=t(1739),o=t(2784),i=t(2345),c=t(2322);function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u=(0,o.forwardRef)((function(e,r){var t=e.name,n=e.label,a=(e.outerProps,e.fieldProps),o=(e.labelProps,e.type),l=void 0===o?"text":o,u=e.helpText,m=(0,s.Z)(e,["name","label","outerProps","fieldProps","labelProps","type","helpText"]),x=(0,i.U$)(t,d({},a)),h=x.input,f=x.meta,p=f.touched,b=f.error,j=f.submitError,g=f.submitting,v=Array.isArray(b)?b.join(", "):b||j,y=p&&v;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",d(d(d({title:n,type:l},h),{},{disabled:g},m),{},{className:"rounded-md border border-gray-300 focus:ring-0 focus:border-black px-4 flex-auto min-w-0 sm:text-sm",placeholder:"mydomain.com",pattern:"^(?:[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\\.)?[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\\.[a-zA-Z]{2,}$",autoComplete:"off",ref:r})),y&&(0,c.jsxs)("div",{className:"text-red-500 text-left w-full max-w-2xl mt-5 text-sm flex items-center space-x-2",children:[(0,c.jsxs)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",style:{color:"#f44336"},children:[(0,c.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"white"}),(0,c.jsx)("path",{d:"M12 8v4",stroke:"#f44336"}),(0,c.jsx)("path",{d:"M12 16h.01",stroke:"#f44336"})]}),(0,c.jsx)("p",{children:v})]}),u&&(0,c.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:u})]})}));function m(e){return(0,c.jsx)(a.l0,d(d({},e),{},{className:"flex justify-between space-x-4 w-full max-w-2xl h-10 mt-10 mb-10",children:(0,c.jsx)(u,{name:"domain",label:"Domain",placeholder:"Domain"})}))}},8784:function(e,r,t){"use strict";var n=t(1428);r.Z=(0,n.buildRpcClient)({resolverName:"getDomain",resolverType:"query",routePath:"/api/rpc/getDomain"})},1775:function(e,r,t){"use strict";var n=t(1428);r.Z=(0,n.buildRpcClient)({resolverName:"getDomains",resolverType:"query",routePath:"/api/rpc/getDomains"})},3717:function(e,r,t){"use strict";t.r(r),t.d(r,{DomainsList:function(){return N},default:function(){return P}});var n=t(4942),s=t(7757),a=t.n(s),o=t(5861),i=t(7234),c=t(2784),l=t(2540),d=t(1428),u=t(9527),m=t(1775),x=t(6281),h=t(8784),f=(0,d.buildRpcClient)({resolverName:"createDomain",resolverType:"mutation",routePath:"/api/rpc/createDomain"}),p=t(5300),b=t(195),j=b.z.string().regex(/^(?:[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.)?[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}/).transform((function(e){return e.toLowerCase().trim()})),g=b.z.object({domain:j}),v=t(4096),y=t(2322),w=function(e){var r=e.domain,t=(e.domains,(0,d.useQuery)(h.Z,{id:r.domain},{refetchInterval:5e3,initialData:r})),n=(0,i.Z)(t,1)[0],s=(0,c.useState)("CNAME"),l=s[0],u=s[1],m=(0,c.useState)(!1),x=m[0],f=m[1];return console.log({domain:n}),(0,y.jsxs)("div",{className:"w-full mt-10 shadow-md border border-gray-50 rounded-lg py-10",children:[(0,y.jsxs)("div",{className:"flex justify-between space-x-4 px-10",children:[(0,y.jsxs)("a",{href:"http://".concat(n.domain),target:"_blank",className:"text-xl font-semibold flex items-center",rel:"noreferrer",children:[n.domain,(0,y.jsx)("span",{className:"inline-block ml-2",children:(0,y.jsxs)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:[(0,y.jsx)("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),(0,y.jsx)("path",{d:"M15 3h6v6"}),(0,y.jsx)("path",{d:"M10 14L21 3"})]})})]}),(0,y.jsxs)("div",{className:"flex space-x-3",children:[(0,y.jsx)("button",{onClick:function(){},className:"".concat("bg-white hover:text-black hover:border-black"," text-gray-500 border-gray-200 py-1.5 w-24 text-sm border-solid border rounded-md focus:outline-none transition-all ease-in-out duration-150")}),(0,y.jsx)("button",{onClick:(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!0);case 1:case"end":return e.stop()}}),e)}))),disabled:x,className:"".concat(x?"cursor-not-allowed bg-gray-100":"","bg-red-500 text-white border-red-500 hover:text-red-500 hover:bg-white py-1.5 w-24 text-sm border-solid border rounded-md focus:outline-none transition-all ease-in-out duration-150")})]})]}),(0,y.jsxs)("div",{className:"flex items-center space-x-3 my-3 px-10",children:[(0,y.jsxs)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"geometricPrecision",children:[(0,y.jsx)("circle",{cx:"12",cy:"12",r:"10",fill:"#1976d2"}),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("path",{d:"M8 11.8571L10.5 14.3572L15.8572 9",fill:"none",stroke:"white"})})]}),(0,y.jsxs)("p",{className:"".concat("text-black font-normal"," text-sm"),children:["Valid"," Configuration"]})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"w-full border-t border-gray-100 mt-5 mb-8"}),(0,y.jsxs)("div",{className:"px-10",children:[(0,y.jsxs)("div",{className:"flex justify-start space-x-4",children:[(0,y.jsx)("button",{onClick:function(){return u("CNAME")},className:"".concat("CNAME"==l?"text-black border-black":"text-gray-400 border-white"," text-sm border-b-2 pb-1 transition-all ease duration-150"),children:"CNAME Record (subdomains)"}),(0,y.jsx)("button",{onClick:function(){return u("A")},className:"".concat("A"==l?"text-black border-black":"text-gray-400 border-white"," text-sm border-b-2 pb-1 transition-all ease duration-150"),children:"A Record (apex domain)"})]}),(0,y.jsxs)("div",{className:"my-3 text-left",children:[(0,y.jsx)("p",{className:"my-5 text-sm",children:"Set the following record on your DNS provider to continue:"}),(0,y.jsxs)("div",{className:"flex justify-start items-center space-x-10 bg-gray-50 p-2 rounded-md",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-bold",children:"Type"}),(0,y.jsx)("p",{className:"text-sm font-mono mt-2",children:l})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-bold",children:"Name"}),(0,y.jsx)("p",{className:"text-sm font-mono mt-2",children:"CNAME"==l?"www":"@"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"text-sm font-bold",children:"Value"}),(0,y.jsx)("p",{className:"text-sm font-mono mt-2",children:"CNAME"==l?"cname.platformize.co":"76.76.21.21"})]})]})]})]})]})]})},N=function(){var e=(0,l.useRouter)(),r=Number(e.query.page)||0,t=(0,d.usePaginatedQuery)(m.Z,{only:"organization",orderBy:{id:"asc"},skip:100*r,take:100}),n=(0,i.Z)(t,1)[0],s=n.domains,a=n.hasMore;return(0,y.jsxs)("div",{className:"w-full max-w-2xl",children:[s.map((function(e){return(0,y.jsx)(w,{domain:e,domains:s},e.id)})),0===r&&!0===a&&(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("button",{disabled:0===r,onClick:function(){return e.push({query:{page:r-1}})},children:"Previous"}),(0,y.jsx)("button",{disabled:!a,onClick:function(){return e.push({query:{page:r+1}})},children:"Next"})]})]})},k=function(){var e=(0,l.useRouter)(),r=(0,d.useMutation)(f),t=(0,i.Z)(r,1)[0];return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(u.Head,{children:(0,y.jsx)("title",{children:"Domains"})}),(0,y.jsxs)("main",{className:"flex flex-col items-center justify-center w-full flex-1 px-20 text-center my-20",children:[(0,y.jsx)(p.Yl,{submitText:"Add",submitProps:{className:"bg-black text-white border-black hover:text-black hover:bg-white py-2 w-28 text-sm border-solid border rounded-md focus:outline-none transition-all ease-in-out duration-150"},schema:g,onSubmit:function(){var r=(0,o.Z)(a().mark((function r(s){var o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t(s);case 3:o=r.sent,e.push(l.Routes.ShowDomainPage({domainId:o.id})),r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(0),console.error(r.t0),r.abrupt("return",(0,n.Z)({},v.Ck,r.t0.toString()));case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}),(0,y.jsx)(c.Suspense,{fallback:(0,y.jsx)("div",{children:"Loading..."}),children:(0,y.jsx)(N,{})})]})]})};k.authenticate=!0,k.getLayout=function(e){return(0,y.jsx)(x.Z,{children:e})};var P=k},3815:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/domains",function(){return t(3717)}])}},function(e){e.O(0,[247,92,836,672,774,888,179],(function(){return r=3815,e(e.s=r);var r}));var r=e.O();_N_E=r}]);